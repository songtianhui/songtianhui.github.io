---
title: 计算机网络课程笔记-第六章链路层和局域网
date: 2021-09-06 14:26:30
tags:
categories:
- 课程
- Network
mathjax: true
---



---

# 链路层 Link

- 运行链路层协议的任何设备均称为**节点（node）**，包括主机、路由器、交换机和 WiFi 接入点。
- 沿着通信路径连接的相邻节点的通信信道称为**链路（link）**。
- 在经过特定的链路时，传输节点将数据报封装在链路层帧中，并将该帧传输到链路中。

<!--more -->

## 链路层提供的服务

- **成帧（framing）**。
- **链路接入**。媒体访问控制（Medium Access Control, MAC）协议。

- **可靠交付**。
- **差错检测和纠正**。

## 链路层实现

链路层的主体部分是在**网络适配器（network adapter）**中实现的，也称**网络接口卡（Network Interface Card, NIC）**。



---

# 差错检测和纠正 Error Dectection and Correction

- **差错检测和纠正比特（Error-Detection-and-Correction, EDC）**
- **未检出比特差错（undetected bit error）**

3种技术（都是学过的）：

- 奇偶校验
- 检验和（checksum，适用于运输层）、因特网检验和
- 循环冗余检测（CRC，适用于适配器中的链路层）：多项式编码、生成多项式



---

# 多路访问链路和协议

- **点对点链路（point-to-point link）**，由链路一段发送方和另一端单个接收方组成。
  - 点对点协议（point-to-point protocol, PPP）
  - 高级数据链路控制（high-level data link control, HDLC）
- **广播链路（broadcast link）**，多点、共享信道。

## 信道划分协议 Channel Partitioning Protocol

## 随机接入协议 Random Access Protocol

## 轮流协议 Taking-turns Protocol



---

# 交换局域网



## 链路层寻址和 ARP

- MAC 地址
  - 主机和路由器不具有链路层地址
  - 它们的适配器（网络接口）具有链路层地址
  - 具有多个网络接口的主机具有与之相关联的多个链路层地址
  - 链路层交换机并不具有与接口相关联的链路层地址（交换机交换是透明的）

- **地址解析协议（Address Resolution Protocol）**，网络层地址（因特网中的IP地址）和链路层地址（MAC地址）进行转换。
  - 发送方构造一个称为ARP分组（ARP packet）的特殊分组，一个ARP分组有几个字段：发送、接收IP地址以及MAC地址。ARP查询分组的目的时查询子网上所有其他主机和路由器，以确定对于要解析的IP地址的MAC地址。
  - 适配器封装ARP分组，用广播地址作为帧的目的地址，将帧传输进子网中。
  - 目标主机给查询主机发送回一个带有所希望映射的响应ARP分组（使用标准帧而不是广播地址），然后查询主机更新ARP表，并发送IP数据报。

- 发送数据报到子网以外
  - 路由器每个端口均有 MAC 和 IP。
  - 路由器将相应 ARP, 主机获得的此 IP 的 MAC 地址是路由器这一端口的 MAC。



## 以太网 Ethernet

- 帧结构
  - 数据字段（46-1500字节）。承载了 IP 数据报。
  - 目的地址（6字节）。包含目的适配器的 MAC 地址。
  - 原地址（6字节）。包含传输该帧到局域网上的适配器的 MAC 地址。
  - 类型字段（2字节）。允许以太网复用多种网络层协议。
  - CRC（4字节）。检错。
  - 
  - 前同步码（8字节）。前7字节为`10101010`，最后字节为`10101011`，用于唤醒接受适配器并同步时钟。

以太网技术向网络层提供：

- 无连接服务：发送数据报帧无需事先握手
- 不可靠服务：接收器进行CRC校验，不管是否通过都不返回确认（ACK）/否定确认（NEG）帧



## 链路层交换机

